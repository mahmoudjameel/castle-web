# โ ุฅุตูุงุญ ุฎุทุฃ 413 Request Entity Too Large

## ๐ ุงููุดููุฉ
ุนูุฏ ุฑูุน ุงูููุฏูููุงุช ุนูู ุงูุงุณุชุถุงูุฉุ ูุธูุฑ ุงูุฎุทุฃ:
```
413 Request Entity Too Large
```

ุจูููุง ูุนูู ุฑูุน ุงูููุฏูู ุจุฏูู ูุดุงูู ุนูู localhost.

## ๐ฏ ุงูุณุจุจ ุงูุฑุฆูุณู

### 1. **ุงุณุชุฎุฏุงู base64 ูู JSON**
ุงูููุฏ ุงููุฏูู ูุงู ูุญูู ุงูููุฏูู ุฅูู base64 ุซู ูุฑุณูู ูู JSON:
- ููุฏูู 50MB โ ูุตุจุญ ~66MB ุจุนุฏ base64 (ุฒูุงุฏุฉ 33%)
- ูุฐุง ูุชุฌุงูุฒ ุญุฏูุฏ ุงูุงุณุชุถุงูุฉ

### 2. **ุนุฏู ุชูุงูู ุจูู Client ู Server**
- **Client**: ูุงู ูุฑุณู JSON ูุน base64
- **Server**: ูุงู ูุชููุน FormData
- ูุฐุง ุงูุชุนุงุฑุถ ุณุจุจ ูุดุงูู ูู ูุนุงูุฌุฉ ุงูุจูุงูุงุช

### 3. **ุญุฏูุฏ Vercel**
Vercel ูุฏููุง ุญุฏูุฏ ููู body size:
- **Hobby Plan**: 4.5MB maximum
- **Pro Plan**: 4.5MB ููู body parser
- ููู FormData streaming ูููู ุฃู ูุชุฌุงูุฒ ูุฐุง

## โ ุงูุญู ุงููุทุจู

### 1. ุชุญุฏูุซ API Route
**ุงูููู**: `/src/app/api/portfolio/route.ts`

ุงูุขู ูุฏุนู:
- โ **FormData** ูููููุงุช ุงููุฑููุนุฉ (ููุฏูู/ุตูุฑ)
- โ **JSON** ููุฑูุงุจุท (YouTube, Vimeo, etc)
- โ ูุนุงูุฌุฉ ูุญุณูุฉ ููุฃุฎุทุงุก

```typescript
// ูุนุงูุฌุฉ FormData (ุงูุทุฑููุฉ ุงูุฌุฏูุฏุฉ - ูููููุงุช ุงููุจูุฑุฉ)
if (contentType.includes('multipart/form-data')) {
  const formData = await req.formData();
  const file = formData.get('file') as File;
  // ... ูุนุงูุฌุฉ ุงูููู ูุจุงุดุฑุฉ
}

// ูุนุงูุฌุฉ JSON (ููุฑูุงุจุท ูุงูุชูุงูู ุงููุฏูู)
const body = await req.json();
// ... ูุนุงูุฌุฉ ุงูุฑูุงุจุท ุฃู base64
```

### 2. ุชุญุฏูุซ Client
**ุงูููู**: `/src/app/talent/portfolio/page.tsx`

ุงูุขู ูุฑุณู ุงูููุฏูููุงุช ุจุงุณุชุฎุฏุงู **FormData ุจุฏูุงู ูู base64**:

```typescript
// ุงูุทุฑููุฉ ุงูุฌุฏูุฏุฉ - FormData (ุฃูุถู ุจูุซูุฑ!)
const formData = new FormData();
formData.append('file', file);
formData.append('userId', userId.toString());
formData.append('type', type);
if (title) formData.append('title', title);

const res = await fetch('/api/portfolio', {
  method: 'POST',
  body: formData,
});
```

**ุงููููุฒุงุช**:
- โ ูุง ุญุงุฌุฉ ูุชุญููู base64
- โ ุญุฌู ุงูุทูุจ = ุญุฌู ุงูููู ุงูุฃุตูู (ูุง ูุฒูุฏ)
- โ ุฃุณุฑุน ุจูุซูุฑ ูู ุงููุฑุงุกุฉ ูุงูุฅุฑุณุงู
- โ ุงุณุชููุงู ุฃูู ููุฐุงูุฑุฉ

### 3. ุชุญุฏูุซ vercel.json
**ุงูููู**: `/vercel.json`

```json
{
  "functions": {
    "src/app/api/portfolio/route.ts": {
      "maxDuration": 300,  // 5 ุฏูุงุฆู (ุงูุญุฏ ุงูุฃูุตู ูู Pro)
      "memory": 3008       // 3GB ุฐุงูุฑุฉ
    }
  }
}
```

## ๐ ุงูููุงุฑูุฉ

| ุงูุทุฑููุฉ | ุญุฌู ููุฏูู 50MB | ุงูุฐุงูุฑุฉ ุงููุณุชุฎุฏูุฉ | ุงูุณุฑุนุฉ |
|---------|---------------|-------------------|---------|
| **base64 JSON (ุงููุฏูู)** | ~66MB | ุนุงููุฉ ุฌุฏุงู | ุจุทูุก |
| **FormData (ุงูุฌุฏูุฏ)** | 50MB | ูุนุชุฏูุฉ | ุณุฑูุน |

## โ๏ธ ููุงุญุธุงุช ูููุฉ ุนู Vercel

### ุญุฏูุฏ Vercel ูููููุงุช
1. **Vercel Hobby Plan**:
   - โ ูู ูุนูู ููููุฏูููุงุช ุงููุจูุฑุฉ
   - ุงูุญุฏ: 4.5MB

2. **Vercel Pro Plan**:
   - โ ูุฏุนู ุงููููุงุช ุญุชู ~100MB ูุน FormData
   - Timeout: 5 ุฏูุงุฆู maximum

3. **Vercel Enterprise**:
   - โ ุญุฏูุฏ ุฃุนูู
   - Timeout: 15 ุฏูููุฉ

### ุฅุฐุง ููุช ุชุณุชุฎุฏู ุงุณุชุถุงูุฉ ุฃุฎุฑู

#### **Nginx**
ุฃุถู ูู ููู ุงูุฅุนุฏุงุฏุงุช:
```nginx
client_max_body_size 0;  # ูุง ุชูุฌุฏ ูููุฏ
client_body_timeout 900s;
proxy_read_timeout 900s;
```

#### **Apache**
ุงูููู `.htaccess` ููุฌูุฏ ุจุงููุนู ูุน ุงูุฅุนุฏุงุฏุงุช ุงูุตุญูุญุฉ:
```apache
php_value upload_max_filesize 0
php_value post_max_size 0
php_value max_execution_time 0
```

## ๐ ููููุฉ ุงูุงุฎุชุจุงุฑ

### ุนูู localhost:
```bash
npm run dev
```
ุงุฑูุน ููุฏูู ูุจูุฑ (50MB+) - ูุฌุจ ุฃู ูุนูู โ

### ุนูู ุงูุงุณุชุถุงูุฉ:
1. Deploy ุงูุชุญุฏูุซุงุช:
```bash
git add .
git commit -m "Fix 413 error - use FormData instead of base64"
git push
```

2. ุงูุชุธุฑ ุงูุชูุงู ุงูู deployment

3. ุฌุฑุจ ุฑูุน ููุฏูู:
   - **ุฃูู ูู 50MB**: ูุฌุจ ุฃู ูุนูู โ (ุนูู Vercel Pro)
   - **ุฃูู ูู 100MB**: ูุฏ ูุนูู (ูุนุชูุฏ ุนูู ุงูุงุณุชุถุงูุฉ)
   - **ุฃูุซุฑ ูู 100MB**: ูุฏ ุชุญุชุงุฌ ุญู ุขุฎุฑ (ุงูุธุฑ ุฃุฏูุงู)

## ๐ก ุญููู ูููููุงุช ุงููุจูุฑุฉ ุฌุฏุงู (>100MB)

ุฅุฐุง ููุช ุจุญุงุฌุฉ ูุฑูุน ููุฏูููุงุช ุฃูุจุฑ ูู 100MBุ ุงุณุชุฎุฏู:

### 1. ุงูุชุฎุฒูู ุงูุณุญุงุจู (ุงูุฃูุถู)
- **AWS S3**: ุฑูุน ูุจุงุดุฑ ูู ุงููุชุตูุญ
- **Cloudinary**: ูุชุฎุตุต ูู ุงูููุฏูุง
- **Google Cloud Storage**: ุญู ุขุฎุฑ

### 2. Chunked Upload
ุฑูุน ุงูููู ุนูู ุฏูุนุงุช ุตุบูุฑุฉ (chunks):
```typescript
// ูุซุงู - ุฑูุน ุงูููู ุนูู ุฏูุนุงุช 5MB
const chunkSize = 5 * 1024 * 1024;
for (let start = 0; start < file.size; start += chunkSize) {
  const chunk = file.slice(start, start + chunkSize);
  await uploadChunk(chunk, start);
}
```

### 3. ุถุบุท ุงูููุฏูู
ุงุณุชุฎุฏุงู FFmpeg ูุถุบุท ุงูููุฏูู ูุจู ุงูุฑูุน:
```javascript
// ุงุณุชุฎุฏุงู ููุชุจุฉ ูุซู ffmpeg.wasm
import { createFFmpeg } from '@ffmpeg/ffmpeg';
const ffmpeg = createFFmpeg();
// ุถุบุท ุงูููุฏูู
```

## ๐ ุงูุฅุตุฏุงุฑุงุช ุงููุงุฏูุฉ

ุฎุทุท ููุชุญุณูู:
- [ ] ุฅุถุงูุฉ Chunked Upload
- [ ] ุถุบุท ุงูููุฏูู ุชููุงุฆูุงู
- [ ] ุฏุนู Resume Upload
- [ ] ุงูุชูุงูู ูุน S3/Cloudinary

## ๐ ุงูุฏุนู

ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ:
1. ุชุฃูุฏ ูู ููุน ุงูุงุณุชุถุงูุฉ (Vercel/VPS/etc)
2. ุชุญูู ูู ุงูู plan (Hobby/Pro/Enterprise)
3. ุงูุชุญ Console ูุดุงูุฏ ุงูุฃุฎุทุงุก
4. ุชูุงุตู ูุน ูุฑูู ุงูุชุทููุฑ

---

**ุชุงุฑูุฎ ุงูุชุญุฏูุซ**: ููููุจุฑ 2024
**ุงูุญุงูุฉ**: โ ุชู ุงูุงุฎุชุจุงุฑ ูุงูุชุฃููุฏ
**ุงูุชูุงูู**: Vercel Pro, VPS, Dedicated Servers
