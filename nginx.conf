# إعدادات Nginx لدعم رفع الملفات الكبيرة
# ضع هذا الملف في مسار السيرفر أو أضف الإعدادات إلى ملف nginx.conf الموجود

# إعدادات عامة للسيرفر
http {
    # السماح برفع ملفات حتى 500MB (أو أي حجم تريده)
    client_max_body_size 500M;
    
    # زيادة timeout للملفات الكبيرة
    client_body_timeout 600s;
    client_header_timeout 600s;
    
    # إعدادات الـ buffer
    client_body_buffer_size 256k;
    large_client_header_buffers 4 16k;
}

# إعدادات للموقع المحدد
server {
    listen 80;
    listen 443 ssl http2;
    server_name toqtalent.com www.toqtalent.com;
    
    # السماح برفع ملفات كبيرة لهذا الموقع فقط
    client_max_body_size 500M;
    client_body_timeout 600s;
    
    # إعدادات SSL (إذا كان لديك)
    # ssl_certificate /path/to/cert.pem;
    # ssl_certificate_key /path/to/key.pem;
    
    # Proxy settings لـ Next.js
    location / {
        proxy_pass http://localhost:3000;  # أو المنفذ الذي يعمل عليه Next.js
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        
        # زيادة timeout للـ proxy
        proxy_connect_timeout 600s;
        proxy_send_timeout 600s;
        proxy_read_timeout 600s;
        send_timeout 600s;
    }
    
    # إعدادات خاصة لـ API endpoint
    location /api/portfolio {
        proxy_pass http://localhost:3000/api/portfolio;
        proxy_http_version 1.1;
        
        # السماح برفع ملفات كبيرة جداً
        client_max_body_size 1000M;
        client_body_timeout 900s;
        
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        # زيادة timeout
        proxy_connect_timeout 900s;
        proxy_send_timeout 900s;
        proxy_read_timeout 900s;
        send_timeout 900s;
    }
}

# ملاحظات:
# 1. استبدل localhost:3000 بالمنفذ الصحيح لتطبيق Next.js
# 2. استبدل toqtalent.com بدومين الموقع الخاص بك
# 3. بعد التعديل، أعد تشغيل Nginx:
#    sudo nginx -t  (للتحقق من صحة الإعدادات)
#    sudo systemctl reload nginx  (لتطبيق التغييرات)
